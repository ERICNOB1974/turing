<div class="container d-flex flex-column justify-content-center align-items-center" style="height: 100vh;">

    <div class="mb-4 d-flex align-items-center">
        <label for="velocidadSelector" class="form-label me-3 text-white">Velocidad:</label>
        <select id="velocidadSelector" class="form-select" style="width: auto;" [(ngModel)]="velocidadActual"
            (change)="cambiarVelocidad()">
            <option *ngFor="let velocidad of velocidades" [value]="velocidad.valor">
                {{ velocidad.nombre }}
            </option>
        </select>
    </div>

    <div class="d-flex mb-4">
        <button (click)="iniciar()" class="btn btn-lg btn-outline-light me-2" [disabled]="maquinaCorriendo"
            [ngClass]="{'disabled': maquinaCorriendo}">
            <span *ngIf="maquinaCorriendo">Ejecutando...</span>
            <span *ngIf="!maquinaCorriendo">Iniciar</span>
        </button>

        <button (click)="paso()" class="btn btn-lg btn-outline-light me-2" [disabled]="maquinaCorriendo">
            Paso
        </button>

        <button (click)="detenerMaquinaBoton()" class="btn btn-lg btn-outline-warning" [disabled]="!maquinaCorriendo">
            Detener
        </button>

        <button (click)="reiniciarCinta()" class="btn btn-lg btn-outline-warning" [disabled]="maquinaCorriendo">
            Borrar cinta
        </button>
        <button mat-raised-button color="primary" (click)="openModal(modalInvitarAmigos)">
            Cargar cinta </button>


    </div>

    <div class="cinta-container mb-4 w-100">
        <div class="d-flex justify-content-start position-relative" style="width: 100%; overflow-x: auto;">
            <div *ngFor="let celda of cinta; let i = index" class="celda mx-1"
                [ngClass]="{'celda-activa': i === posicionCabezal}">
                <span class="celda-contenido">{{ celda }}</span>
            </div>
        </div>
    </div>

    <p class="fs-4 text-white">Cabezal en: <span class="text-white">{{ palabraActual }}</span></p>

</div>

<!-- cinta.html -->
<ng-template #modalInvitarAmigos>
    <div mat-dialog-content>
      <div class="cinta-container">
        <span *ngFor="let celda of nuevaCinta; let i = index" 
              [ngClass]="getCeldaClass(i)"
              (click)="seleccionarCelda(i)">
          {{ celda }}<span *ngIf="i < cinta.length - 1">,</span>
        </span>
      </div>
      <div>
        <input [(ngModel)]="nuevoCaracter" placeholder="Nuevo carÃ¡cter" />
        <button (click)="agregarCelda()">Agregar Celda</button>
      </div>
    </div>
  </ng-template>